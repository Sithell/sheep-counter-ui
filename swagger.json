{"openapi":"3.1.0","info":{"title":"Sheep Counter API","description":"API для детекции объектов на изображениях с помощью YOLO","version":"1.0.0","x-logo":{"url":"https://fastapi.tiangolo.com/img/logo-margin/logo-teal.png"}},"paths":{"/job":{"post":{"summary":"Загрузить изображение","description":"Загружает изображение и создает задачу на обработку","operationId":"create_job_job_post","requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_create_job_job_post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Job"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"summary":"Получить статус задачи","description":"Возвращает информацию о задаче по её идентификатору","operationId":"get_job_status_job_get","parameters":[{"name":"id","in":"query","required":true,"schema":{"type":"string","description":"Идентификатор задачи","title":"Id"},"description":"Идентификатор задачи"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Job"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/jobs":{"get":{"summary":"Получить список задач","description":"Возвращает список задач с пагинацией","operationId":"list_jobs_jobs_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Количество задач на странице","default":10,"title":"Limit"},"description":"Количество задач на странице"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Смещение от начала списка","default":0,"title":"Offset"},"description":"Смещение от начала списка"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JobsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"Body_create_job_job_post":{"properties":{"file":{"type":"string","format":"binary","title":"File","description":"Изображение для обработки"}},"type":"object","required":["file"],"title":"Body_create_job_job_post"},"DetectionResult":{"properties":{"sheep_count":{"type":"integer","title":"Sheep Count","description":"Количество найденных овец"},"image":{"type":"string","title":"Image","description":"URL обработанного изображения"},"duration":{"type":"integer","title":"Duration","description":"Время обработки в миллисекундах"}},"type":"object","required":["sheep_count","image","duration"],"title":"DetectionResult","description":"Результат обработки изображения."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"Job":{"properties":{"id":{"type":"string","title":"Id","description":"Уникальный идентификатор задачи"},"filename":{"type":"string","title":"Filename","description":"Имя загруженного файла"},"status":{"$ref":"#/components/schemas/JobStatus","description":"Текущий статус задачи"},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"Время создания задачи"},"result":{"anyOf":[{"$ref":"#/components/schemas/DetectionResult"},{"$ref":"#/components/schemas/JobError"},{"type":"null"}],"title":"Result","description":"Результат обработки или информация об ошибке"}},"type":"object","required":["id","filename","status","created_at"],"title":"Job","description":"Информация о задаче обработки изображения."},"JobError":{"properties":{"error":{"type":"string","title":"Error","description":"Описание ошибки"}},"type":"object","required":["error"],"title":"JobError","description":"Информация об ошибке при обработке."},"JobStatus":{"type":"string","enum":["queued","processing","done","error"],"title":"JobStatus","description":"Статусы задачи обработки изображения."},"JobsResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/Job"},"type":"array","title":"Items","description":"Список задач"},"total":{"type":"integer","title":"Total","description":"Общее количество задач"},"limit":{"type":"integer","title":"Limit","description":"Количество задач на странице"},"offset":{"type":"integer","title":"Offset","description":"Смещение от начала списка"}},"type":"object","required":["items","total","limit","offset"],"title":"JobsResponse","description":"Ответ со списком задач и информацией о пагинации."},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}